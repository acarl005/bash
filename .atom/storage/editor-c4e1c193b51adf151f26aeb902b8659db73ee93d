{"version":1,"windowDimensions":{"x":65,"y":24,"width":1855,"height":1056,"maximized":true},"grammars":{"grammarOverridesByPath":{}},"project":{"deserializer":"Project","paths":["/home/andy/Documents/production/auth-server"],"buffers":[{"text":"var fs = require('fs');\nvar express = require('express');\n\nvar app = express();\n\nvar jwtCtrl = require('./controllers/jwt-controller.js');\n\nvar keys = {\n  key: fs.readFileSync('keys/www_codesmith_io.key'),\n  cert: fs.readFileSync('keys/www_codesmith_io.pem')\n};\n\nvar server = require('https').Server(keys, app);\n\n// redirect via https if requested with http\napp.use(function(req, res, next) {\n  if (req.headers['x-forwarded-proto'] === 'http' || req.protocol === 'http') {\n    return res.redirect(301, 'https://' + req.headers.host + req.path);\n  }\n  next();\n});\n\napp.get('/auth', jwtCtrl.neww);\napp.get('/github/callback', jwtCtrl.create, jwtCtrl.send);\n\napp.get('/', function(req, res) {\n  res.write('Healthy');\n  res.end();\n});\n\nvar port, arg2 = process.argv[2];\nif (arg2 && arg2.match(/^\\d+$/)) {\n  port = arg2;\n} else {\n  port = 8443;\n}\nserver.listen(port, () => {\n  console.log('server listening at https://localhost:' + port);\n});\n\nmodule.exports = app;\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"nextMarkerId":7,"id":"0","maintainHistory":false,"markersById":{"0-4":{"range":{"start":{"row":16,"column":76},"end":{"row":16,"column":77}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap"},"0-5":{"range":{"start":{"row":16,"column":5},"end":{"row":16,"column":6}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap"}},"version":2},"1":{"nextMarkerId":0,"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"nextMarkerId":1,"id":"2","maintainHistory":true,"markersById":{"2-0":{"range":{"start":{"row":16,"column":76},"end":{"row":16,"column":76}},"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2}},"nextMarkerLayerId":3,"history":{"version":3,"nextCheckpointId":4,"undoStack":[{"type":"group-start","snapshot":{"2":{"2-0":{"range":[[16,6],[16,64]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[16,6],[16,64]],"newRange":[[16,6],[16,76]],"oldText":"process.env.NODE_ENV !== 'test' && req.protocol === 'http'","newText":"req.headers['x-forwarded-proto'] === 'http' || req.protocol === 'http'"}},{"type":"group-end","snapshot":{"2":{"2-0":{"range":[[16,76],[16,76]],"properties":{"type":"selection","goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}}],"redoStack":[]},"encoding":"utf8","filePath":"/home/andy/Documents/production/auth-server/app/server.js","digestWhenLastPersisted":"dea83d7eeb2502b9041e88e9fa602c76420f60e5","preferredLineEnding":null,"deserializer":"TextBuffer","version":4}]},"workspace":{"deserializer":"Workspace","paneContainer":{"deserializer":"PaneContainer","version":1,"root":{"deserializer":"Pane","id":3,"items":[{"deserializer":"TextEditor","id":490,"softTabs":true,"firstVisibleScreenRow":5,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":491,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/home/andy/Documents/production/auth-server/app/server.js","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"}],"activeItemURI":"/home/andy/Documents/production/auth-server/app/server.js","focused":true,"flexScale":1},"activePaneId":3},"packagesWithActiveGrammars":["language-javascript","language-hyperlink","language-todo"],"destroyedItemURIs":["/home/andy/.bashrc","/home/andy/Documents/production/auth-server/config/test0.json","/home/andy/Documents/production/auth-server/app/controllers/github-controller.js","/home/andy/Desktop/foo.js","/home/andy/Documents/production/auth-server/app/services/jwt-service.js","/home/andy/Documents/production/auth-server/keys/jwt-public.pem","/home/andy/Documents/production/auth-server/keys/jwt-private.pem","/home/andy/Documents/production/auth-server/config/test.json","/home/andy/Documents/production/auth-server/keys/key.pem","/home/andy/Documents/production/auth-server/keys/cert.pem","/home/andy/Documents/production/auth-server/keys/www_codesmith_io.crt","/home/andy/Documents/production/auth-server/keys/www_codesmith_io.key","/home/andy/Documents/production/auth-server/keys/www_codesmith_io.pem","/home/andy/Documents/production/auth-server/config/default.json","/home/andy/Documents/production/auth-server/keys/www_codesmith_io_bundle.pem","/home/andy/Documents/production/auth-server/.gitignore","/home/andy/Documents/production/auth-server/.travis.yml","atom://config","/home/andy/Documents/production/auth-server/index.js","/home/andy/Documents/production/auth-server/test/stub.js","/home/andy/Documents/production/auth-server/.elasticbeanstalk/config.yml","/home/andy/Documents/production/auth-server/test/sinon-stubs.js","/home/andy/Documents/production/auth-server/package.json","/home/andy/Documents/production/auth-server/app/services/github-service.js","/home/andy/Documents/production/auth-server/.ebextensions/node.config","/home/andy/Documents/production/auth-server/app/services/team-service.js","/home/andy/Documents/production/auth-server/test/index.js","/home/andy/Documents/production/auth-server/README.md","/home/andy/Documents/production/auth-server/app/controllers/jwt-controller.js"]},"packageStates":{"pigments":{"project":{"deserializer":"ColorProject","timestamp":"2016-01-15T05:57:30.708Z","version":"1.0.1","markersVersion":"1.0.5","globalSourceNames":["**/*.styl","**/*.stylus","**/*.less","**/*.sass","**/*.scss"],"globalIgnoredNames":["vendor/*","node_modules/*","spec/*","test/*"],"buffers":{"490":{"id":490,"path":"/home/andy/Documents/production/auth-server/app/server.js","colorMarkers":[]}},"paths":[],"variables":{"deserializer":"VariablesCollection","content":[]}}},"find-and-replace":{"findOptions":{"findPattern":"","replacePattern":"","pathsPattern":"","useRegex":false,"wholeWord":false,"caseSensitive":false,"inCurrentSelection":false},"findHistory":[],"replaceHistory":[],"pathsHistory":[]},"fuzzy-finder":{"/home/andy/Documents/production/auth-server/app/server.js":1452837130282},"metrics":{"sessionLength":335300},"tabs":[{}],"tree-view":{"directoryExpansionStates":{"/home/andy/Documents/production/auth-server":{"isExpanded":true,"entries":{".ebextensions":{"isExpanded":true,"entries":{}},".elasticbeanstalk":{"isExpanded":true,"entries":{}},"app":{"isExpanded":true,"entries":{"controllers":{"isExpanded":true,"entries":{}},"services":{"isExpanded":true,"entries":{}}}},"config":{"isExpanded":true,"entries":{}},"keys":{"isExpanded":false,"entries":{}},"node_modules":{"isExpanded":false,"entries":{}},"test":{"isExpanded":true,"entries":{}}}}},"selectedPath":"/home/andy/Documents/production/auth-server/app/server.js","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":276},"keybinding-resolver":{}},"fullScreen":false}